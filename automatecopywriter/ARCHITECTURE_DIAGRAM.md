# 🏗️ System Architecture Diagrams

## High-Level System Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                    CLIENT APPLICATIONS                         │
├─────────────────────────────────────────────────────────────────┤
│  Web Apps  │  Mobile Apps  │  Third-party APIs  │  CLI Tools   │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                    FASTAPI APPLICATION                         │
├─────────────────────────────────────────────────────────────────┤
│  Routes Layer          │  Services Layer        │  Tools Layer │
│  ┌─────────────────┐   │  ┌─────────────────┐   │  ┌──────────┐│
│  │ /generate       │   │  │ ContentService  │   │  │ AI Agents││
│  │ /seo            │   │  │ SEOService      │   │  │ Jina Tools││
│  │ /health         │   │  │ Validation      │   │  │ Web Scrap││
│  │ /history        │   │  │ Error Handling  │   │  │ SEO Tools││
│  └─────────────────┘   │  └─────────────────┘   │  └──────────┘│
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                    EXTERNAL SERVICES                           │
├─────────────────────────────────────────────────────────────────┤
│  Google Gemini      │  Jina AI           │  DuckDuckGo Search  │
│  ┌───────────────┐  │  ┌───────────────┐ │  ┌─────────────────┐│
│  │ Content Gen   │  │  │ Web Scraping  │ │  │ Fallback Search ││
│  │ SEO Analysis  │  │  │ Fact Check    │ │  │ Research Data   ││
│  │ Tone Matching │  │  │ Content Anal  │ │  │ Public Access   ││
│  └───────────────┘  │  └───────────────┘ │  └─────────────────┘│
└─────────────────────────────────────────────────────────────────┘
```

## AI Agent Workflow

```
┌─────────────────────────────────────────────────────────────────┐
│                    USER REQUEST                                │
│  Topic + Requirements + SEO Settings + Tone + Audience         │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                    BLOG MANAGER (CodeAgent)                    │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │ • Orchestrates workflow                                     ││
│  │ • Manages agent communication                               ││
│  │ • Handles error recovery                                    ││
│  │ • Coordinates research and writing                          ││
│  └─────────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────┘
                              │
                    ┌─────────┴─────────┐
                    ▼                   ▼
┌─────────────────────────┐   ┌─────────────────────────┐
│    RESEARCH AGENT       │   │    WRITER AGENT         │
│  (ToolCallingAgent)     │   │  (ToolCallingAgent)     │
│  ┌─────────────────┐    │   │  ┌─────────────────┐    │
│  │ • Web Scraping  │    │   │  │ • Content Gen   │    │
│  │ • Fact Check    │    │   │  │ • SEO Optimize  │    │
│  │ • Competitor    │    │   │  │ • Tone Match    │    │
│  │   Analysis      │    │   │  │ • Length Control│    │
│  │ • Keyword       │    │   │  │ • Quality Check │    │
│  │   Research      │    │   │  └─────────────────┘    │
│  └─────────────────┘    │   └─────────────────────────┘
└─────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                    FINAL CONTENT                               │
│  Research-backed + SEO-optimized + Tone-matched Content        │
└─────────────────────────────────────────────────────────────────┘
```

## Content Generation Pipeline

```
┌─────────────────────────────────────────────────────────────────┐
│                    INPUT PROCESSING                            │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐            │
│  │ Topic       │  │ Tone        │  │ Audience    │            │
│  │ Validation  │  │ Selection   │  │ Targeting   │            │
│  └─────────────┘  └─────────────┘  └─────────────┘            │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                    RESEARCH PHASE                              │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐            │
│  │ Web Search  │  │ Content     │  │ Fact        │            │
│  │ & Scraping  │  │ Analysis    │  │ Verification│            │
│  └─────────────┘  └─────────────┘  └─────────────┘            │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐            │
│  │ Competitor  │  │ Keyword     │  │ SEO Data    │            │
│  │ Analysis    │  │ Research    │  │ Collection  │            │
│  └─────────────┘  └─────────────┘  └─────────────┘            │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                    CONTENT PLANNING                            │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐            │
│  │ Structure   │  │ SEO         │  │ Tone        │            │
│  │ Outline     │  │ Strategy    │  │ Adaptation  │            │
│  └─────────────┘  └─────────────┘  └─────────────┘            │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                    WRITING PHASE                               │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐            │
│  │ Content     │  │ SEO         │  │ Quality     │            │
│  │ Generation  │  │ Integration │  │ Assurance   │            │
│  └─────────────┘  └─────────────┘  └─────────────┘            │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                    OUTPUT PROCESSING                           │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐            │
│  │ Formatting  │  │ Metadata    │  │ History     │            │
│  │ & Review    │  │ Generation  │  │ Logging     │            │
│  └─────────────┘  └─────────────┘  └─────────────┘            │
└─────────────────────────────────────────────────────────────────┘
```

## Data Flow Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                    REQUEST LAYER                               │
│  HTTP Request → FastAPI Router → Request Validation            │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                    SERVICE LAYER                               │
│  ContentService → SEOService → ValidationService               │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                    AGENT LAYER                                 │
│  BlogManager → ResearchAgent → WriterAgent                     │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                    EXTERNAL LAYER                              │
│  Gemini LLM ← Jina AI ← DuckDuckGo Search                      │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                    RESPONSE LAYER                              │
│  Content Processing → Response Formatting → HTTP Response      │
└─────────────────────────────────────────────────────────────────┘
```

## Error Handling Flow

```
┌─────────────────────────────────────────────────────────────────┐
│                    ERROR DETECTION                             │
│  API Errors │ Network Errors │ Validation Errors │ Agent Errors │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                    ERROR CLASSIFICATION                        │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐            │
│  │ Recoverable │  │ Fallback    │  │ Fatal       │            │
│  │ Errors      │  │ Available   │  │ Errors      │            │
│  └─────────────┘  └─────────────┘  └─────────────┘            │
└─────────────────────────────────────────────────────────────────┘
                              │
                    ┌─────────┴─────────┐
                    ▼                   ▼
┌─────────────────────────┐   ┌─────────────────────────┐
│    ERROR RECOVERY       │   │    ERROR RESPONSE       │
│  ┌─────────────────┐    │   │  ┌─────────────────┐    │
│  │ Retry Logic     │    │   │  │ User-Friendly   │    │
│  │ Fallback APIs   │    │   │  │ Error Message   │    │
│  │ Alternative     │    │   │  │ Error Code      │    │
│  │ Sources         │    │   │  │ Timestamp       │    │
│  └─────────────────┘    │   │  └─────────────────┘    │
└─────────────────────────┘   └─────────────────────────┘
```

## Performance Optimization

```
┌─────────────────────────────────────────────────────────────────┐
│                    PERFORMANCE LAYERS                          │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐            │
│  │ Async       │  │ Caching     │  │ Connection  │            │
│  │ Processing  │  │ Strategy    │  │ Pooling     │            │
│  └─────────────┘  └─────────────┘  └─────────────┘            │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐            │
│  │ Concurrent  │  │ Memory      │  │ Batch       │            │
│  │ Execution   │  │ Management  │  │ Processing  │            │
│  └─────────────┘  └─────────────┘  └─────────────┘            │
└─────────────────────────────────────────────────────────────────┘
```

## Security Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                    SECURITY LAYERS                             │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐            │
│  │ Input       │  │ API Key     │  │ Rate        │            │
│  │ Validation  │  │ Protection  │  │ Limiting    │            │
│  └─────────────┘  └─────────────┘  └─────────────┘            │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐            │
│  │ CORS        │  │ Error       │  │ Logging &   │            │
│  │ Control     │  │ Handling    │  │ Monitoring  │            │
│  └─────────────┘  └─────────────┘  └─────────────┘            │
└─────────────────────────────────────────────────────────────────┘
```

---

These diagrams provide a visual representation of the Automate Copywriter system architecture, showing the relationships between components, data flow, and system behavior.
